"""
Challenge for:
http://www.pythonchallenge.com/pc/def/linkedlist.php
"""

import urllib
import urllib.request


# <html>
# <head>
#   <title>follow the chain</title>
#   <link rel="stylesheet" type="text/css" href="../style.css">
# </head>
# <body>
# <!-- urllib may help. DON'T TRY ALL NOTHINGS, since it will never
# end. 400 times is more than enough. -->
# <center>
# <a href="linkedlist.php?nothing=12345"><img src="chainsaw.jpg" border="0"/></a>
# <br><br><font color="gold"></center>
# Solutions to previous levels: <a href="http://wiki.pythonchallenge.com/"/>Python Challenge wiki</a>.
# <br><br>
# IRC: irc.freenode.net #pythonchallenge
# </body>
# </html>



# urllib.request
# urllib.parse
# urllib.robotparser
def test_chain():
    baseurl = 'http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing='
    nothing = 12345
    list = []
    for i in range(400):
        site = urllib.request.urlopen(baseurl+str(nothing))
        b_msg = site.read()
        msg = b_msg.decode()
        site.close()
        last_nothing = nothing
        print(msg)
        nothing = int(msg[msg.find('nothing is')+10:])
        if nothing in list:
            print(str(i) + '  ' + str(last_nothing) + '  ' + str(nothing))
            return list
        list.append(nothing)
        # print(msg)
    return list

if __name__ == '__main__':
    list = test_chain()
    print(list)

# 268  72719  15962
# {16386, 22019, 19459, 16903, 88072, 99337, 69642, 17417, 85004, 72204, 72719, 84497, 54805, 64534, 13333, 32280, 537, 25624, 14875, 89115, 71195, 34334, 26134, 13335, 23064, 60450, 68134, 44582, 87593, 87083, 68651, 93229, 85038, 64045, 20016, 35378, 75319, 65079, 93760, 90689, 63552, 6210, 89668, 95810, 80967, 69192, 67656, 4679, 62536, 52299, 53322, 71246, 98893, 9800, 69714, 35924, 49237, 75860, 95830, 70746, 15962, 96349, 78433, 98914, 7266, 84068, 23655, 13416, 12397, 37486, 91249, 26737, 42100, 75381, 80513, 52355, 94344, 53897, 50313, 14477, 5264, 55442, 85653, 18583, 10391, 43161, 66714, 48800, 72352, 57508, 61606, 53931, 49836, 62637, 68786, 24756, 10422, 9399, 84153, 47289, 30905, 55996, 71357, 11458, 54978, 73924, 84165, 11971, 15564, 14030, 64207, 58067, 48341, 9944, 75480, 23769, 51931, 15580, 23775, 46816, 26849, 1249, 96995, 90852, 17125, 34536, 9453, 15086, 35567, 13552, 97520, 23280, 36591, 20216, 42233, 764, 67324, 50430, 59138, 71941, 7439, 22288, 38162, 30483, 7444, 44307, 16155, 5916, 46366, 91936, 12577, 4388, 58660, 96038, 7977, 51498, 8495, 45360, 53553, 6960, 15155, 93491, 64818, 94521, 33594, 15164, 33596, 5949, 48959, 62270, 57153, 88901, 94022, 40775, 38731, 55117, 64333, 89935, 5458, 66388, 42841, 61274, 27999, 13664, 63840, 72037, 86886, 69990, 78185, 92011, 78189, 97646, 39279, 95088, 878, 10610, 4466, 41335, 67961, 86394, 67451, 76667, 90492, 19834, 12157, 40832, 71040, 60291, 74632, 54667, 54155, 52109, 63889, 78226, 45457, 14233, 42910, 36256, 2465, 30626, 24995, 72102, 47528, 98219, 430, 2992, 82866, 97205, 33207, 43959, 13752, 4538, 443, 34238, 5055, 15808, 41920, 56259, 74693, 42439, 15817, 28622, 26575, 41934, 27086, 5074, 47571, 77262, 49621, 63958, 39382, 29144, 24026, 71643, 91611, 91615, 49120, 93665, 82917, 82920, 38891, 17389, 18926, 43507, 18422, 7671, 14840, 55293}

# 268  72719  15962
# {16386, 22019, 19459, 16903, 88072, 99337, 69642, 17417, 85004, 72204, 72719, 84497, 54805, 64534, 13333, 32280, 537, 25624, 14875, 89115, 71195, 34334, 26134, 13335, 23064, 60450, 68134, 44582, 87593, 87083, 68651, 93229, 85038, 64045, 20016, 35378, 75319, 65079, 93760, 90689, 63552, 6210, 89668, 95810, 80967, 69192, 67656, 4679, 62536, 52299, 53322, 71246, 98893, 9800, 69714, 35924, 49237, 75860, 95830, 70746, 15962, 96349, 78433, 98914, 7266, 84068, 23655, 13416, 12397, 37486, 91249, 26737, 42100, 75381, 80513, 52355, 94344, 53897, 50313, 14477, 5264, 55442, 85653, 18583, 10391, 43161, 66714, 48800, 72352, 57508, 61606, 53931, 49836, 62637, 68786, 24756, 10422, 9399, 84153, 47289, 30905, 55996, 71357, 11458, 54978, 73924, 84165, 11971, 15564, 14030, 64207, 58067, 48341, 9944, 75480, 23769, 51931, 15580, 23775, 46816, 26849, 1249, 96995, 90852, 17125, 34536, 9453, 15086, 35567, 13552, 97520, 23280, 36591, 20216, 42233, 764, 67324, 50430, 59138, 71941, 7439, 22288, 38162, 30483, 7444, 44307, 16155, 5916, 46366, 91936, 12577, 4388, 58660, 96038, 7977, 51498, 8495, 45360, 53553, 6960, 15155, 93491, 64818, 94521, 33594, 15164, 33596, 5949, 48959, 62270, 57153, 88901, 94022, 40775, 38731, 55117, 64333, 89935, 5458, 66388, 42841, 61274, 27999, 13664, 63840, 72037, 86886, 69990, 78185, 92011, 78189, 97646, 39279, 95088, 878, 10610, 4466, 41335, 67961, 86394, 67451, 76667, 90492, 19834, 12157, 40832, 71040, 60291, 74632, 54667, 54155, 52109, 63889, 78226, 45457, 14233, 42910, 36256, 2465, 30626, 24995, 72102, 47528, 98219, 430, 2992, 82866, 97205, 33207, 43959, 13752, 4538, 443, 34238, 5055, 15808, 41920, 56259, 74693, 42439, 15817, 28622, 26575, 41934, 27086, 5074, 47571, 77262, 49621, 63958, 39382, 29144, 24026, 71643, 91611, 91615, 49120, 93665, 82917, 82920, 38891, 17389, 18926, 43507, 18422, 7671, 14840, 55293}

# 268  72719  15962
# [34334, 75319, 95088, 75381, 16386, 5264, 12577, 48341, 8495, 55117, 96038, 71643, 4388, 68786, 15164, 11458, 96349, 67451, 71357, 5055, 22019, 30626, 88072, 86394, 537, 70746, 7977, 90852, 15564, 46816, 5458, 15155, 38731, 54805, 64534, 32280, 64333, 28622, 18583, 91615, 10422, 67961, 48800, 7671, 74693, 10610, 54978, 14840, 49621, 80967, 7444, 89668, 84153, 37486, 86886, 82866, 13664, 54667, 69192, 15086, 15962, 9944, 84165, 67656, 68134, 99337, 51498, 98219, 34238, 85038, 53897, 73924, 430, 36256, 55996, 97646, 49237, 18926, 33594, 55293, 53553, 45360, 24995, 34536, 14875, 4466, 63958, 39382, 85004, 35567, 13552, 40775, 57508, 84497, 15808, 40832, 50313, 80513, 87083, 42910, 71941, 84068, 91249, 93491, 42439, 91611, 16903, 33207, 35924, 57153, 12397, 97520, 33596, 76667, 4679, 47571, 62536, 78189, 49836, 35378, 90492, 14030, 71246, 26575, 58660, 19834, 24756, 19459, 85653, 94521, 55442, 43507, 66388, 75860, 82917, 41934, 43959, 15580, 20016, 97205, 44582, 93229, 52299, 5074, 53322, 17389, 50430, 23655, 11971, 30483, 13416, 66714, 59138, 764, 5949, 61606, 49120, 75480, 14477, 90689, 24026, 7439, 60291, 72037, 74632, 23769, 47528, 22288, 71040, 93760, 82920, 98914, 41335, 27086, 72102, 54155, 69642, 42841, 98893, 89115, 15817, 13752, 58067, 18422, 71195, 48959, 56259, 23280, 72352, 63552, 39279, 94344, 62637, 47289, 6210, 65079, 63889, 17125, 89935, 2465, 51931, 16155, 26737, 14233, 96995, 68651, 77262, 27999, 42233, 9399, 2992, 38891, 88901, 95810, 878, 41920, 91936, 63840, 10391, 6960, 93665, 78226, 25624, 26849, 78433, 94022, 72204, 9453, 38162, 13333, 92011, 52355, 12157, 46366, 78185, 5916, 29144, 26134, 53931, 42100, 43161, 17417, 4538, 44307, 87593, 69990, 64207, 13335, 64045, 7266, 9800, 23775, 62270, 45457, 1249, 23064, 30905, 36591, 61274, 443, 52109, 95830, 67324, 20216, 64818, 60450, 69714, 72719]
